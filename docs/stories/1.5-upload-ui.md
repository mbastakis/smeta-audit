# Story 1.5: Drag-and-Drop File Upload UI

## Status
**Ready for Review**

## Story
**As an** HR manager,  
**I want** a drag-and-drop upload interface,  
**so that** I can quickly upload documents to the correct pillar and category.

## Acceptance Criteria
1. Upload button in dashboard opens Material-UI Dialog modal with "Upload Document" title
2. Modal contains react-dropzone area (large, centered, dashed border) with text "Drag and drop file here, or click to browse"
3. File selection triggers: Pillar dropdown (required, options: Pillar 1-4, KPIs, CAPA) and Category dropdown (conditionally shown, options: Policies, Procedures, Forms, Evidence, disabled for KPIs/CAPA)
4. Upload button (disabled until file + pillar selected) triggers POST to `/api/documents/upload` with FormData
5. During upload: Progress indicator shown (circular progress if file < 5MB, linear progress bar with percentage if ≥ 5MB)
6. Success: Green snackbar notification "Document uploaded successfully!" with "View" action button, modal closes automatically
7. Error: Red snackbar with error message (e.g., "File too large. Maximum 50MB"), modal remains open for retry
8. Accepted file types visually indicated: "Supported: PDF, DOCX, XLSX, JPG, PNG"
9. Multiple file uploads not supported (single file at a time for MVP)

## Tasks / Subtasks
- [x] Install react-dropzone
- [x] Create UploadModal component
- [x] Implement drag-and-drop zone
- [x] Add pillar/category dropdowns
- [x] Implement file upload with FormData
- [x] Add progress indicator
- [x] Implement snackbar notifications
- [x] Handle errors and success states

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| Oct 28, 2025 | 1.0 | Story created from PRD | Sarah (PO) |

---

## Dev Agent Record

### Agent Model Used
- Claude 3.5 Sonnet (2024-10-22)

### Implementation Summary
Successfully implemented drag-and-drop file upload modal UI with all acceptance criteria met.

### Completion Notes
- Created UploadModal component using Material-UI Dialog and react-dropzone
- Implemented drag-and-drop zone with visual feedback (dashed border, hover states)
- Added conditional pillar/category dropdowns (category disabled for kpis/capa)
- Integrated with documentService.uploadDocument() with progress tracking
- Progress indicator shows CircularProgress for files <5MB, LinearProgress with percentage for ≥5MB
- Success snackbar shows "Document uploaded successfully!" with "View" action button
- Error snackbar displays API error messages with modal remaining open for retry
- File type validation with visual indicators
- Upload button disabled until file + required fields selected
- Modal auto-closes on successful upload after 1.5s delay
- Integrated into App.tsx with AppBar upload button trigger

### File List
**New Files Created:**
- `frontend/src/components/documents/UploadModal.tsx` - Main upload modal component

**Modified Files:**
- `frontend/src/App.tsx` - Added UploadModal state management and integration
- `frontend/src/services/documentService.ts` - Added uploadDocument() method with progress callback
- `frontend/package.json` - Added react-dropzone dependency

### Debug Log References
None - implementation completed without blocking issues.

### Change Log
| Timestamp | Change | Reason |
|-----------|--------|--------|
| 2025-10-28 19:23 | Implemented UploadModal component | Created full upload UI per frontend spec |
| 2025-10-28 19:23 | Added uploadDocument service method | API integration with progress tracking |
| 2025-10-28 19:23 | Integrated upload modal into App | Connected to AppBar upload button |
