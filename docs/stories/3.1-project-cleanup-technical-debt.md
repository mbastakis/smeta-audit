# Story 3.1: Project Cleanup & Technical Debt Reduction

## Status
**Ready for Development**

## Story
**As a** developer,  
**I want** to clean up the project by removing unnecessary files, organizing resources, and documenting what should be kept vs removed,  
**so that** the project is maintainable, deployable, and doesn't contain bloat or unnecessary artifacts.

## Priority
**Medium** - Should be done after audit, before next development cycle

## Acceptance Criteria
1. All temporary/experimental files identified and either removed or moved to appropriate locations
2. `.gitignore` updated to properly exclude development artifacts and large binary files
3. Resources directory organized with clear documentation of what should be version controlled
4. Electron-related files consolidated or documented for future use
5. Duplicate story files resolved (2.8-footer-component vs 2.8-pdf-worker-fix)
6. Database files properly excluded from version control
7. Build scripts consolidated and documented in README
8. Documentation clearly explains project structure and what each directory contains
9. All cleanup decisions documented in this story's completion notes
10. Git history cleaned (optional large files removed from history if committed)

## Tasks / Subtasks
- [ ] Review and organize `.electron-temp/` directory
- [ ] Review and organize `resources/` directory (3.9MB, 323 files)
- [ ] Update `.gitignore` for proper exclusions
- [ ] Resolve story numbering conflict (two 2.8 stories)
- [ ] Clean up root-level build scripts
- [ ] Document Electron implementation status
- [ ] Clean backend/database.db from git if tracked
- [ ] Verify backend/uploads/ is properly excluded
- [ ] Create CLEANUP-DECISIONS.md documenting what was kept/removed and why
- [ ] Update README with current project state

---

## Detailed Cleanup Analysis

### ðŸ”´ HIGH PRIORITY - Should Remove/Exclude

#### 1. `.electron-temp/` Directory (88KB)
**Status:** Untracked (good), but should be in `.gitignore` or removed

**Contents:**
- Multiple shell scripts (BUILD-AND-RUN.sh, setup-electron.sh, etc.)
- Electron configuration files (main.js, preload.js, package.json)
- Multiple README/guide documents (ELECTRON-README.md, IMPLEMENTATION-SUMMARY.md, etc.)
- Development/debugging scripts (fix-and-continue.sh, quick-test.sh)

**Recommendation:**
- **Option A (Recommended):** Move to proper location if Electron implementation is planned
  - Create `electron/` directory at root
  - Move relevant files there
  - Add proper README explaining Electron implementation status
- **Option B:** Delete entirely if Electron desktop app not needed for SMETA audit
  - Audit requires web app only (per PRD)
  - Electron adds complexity not in original requirements
  
**Action:** DELETE (Electron not in PRD, adds unnecessary complexity pre-audit)
```bash
rm -rf .electron-temp/
echo ".electron-temp/" >> .gitignore
```

#### 2. `ELECTRON_IMPLEMENTATION_GUIDE.md` (Root)
**Status:** Untracked

**Recommendation:** DELETE (redundant with .electron-temp/ documentation)
```bash
rm ELECTRON_IMPLEMENTATION_GUIDE.md
```

#### 3. Root-Level Shell Scripts (5 files)
**Status:** Untracked

**Files:**
- `build-all-platforms.sh`
- `copy-data-to-electron.sh`
- `kill-and-launch.sh`
- `launch-electron.sh`
- `rebuild-and-launch.sh`

**Recommendation:** DELETE ALL (Electron-related, not in PRD requirements)
```bash
rm build-all-platforms.sh copy-data-to-electron.sh kill-and-launch.sh launch-electron.sh rebuild-and-launch.sh
```

#### 4. `backend/database.db`
**Status:** Untracked, 0 bytes (empty)

**Recommendation:** Remove from git tracking, ensure `.gitignore` covers it
```bash
git rm --cached backend/database.db 2>/dev/null || true
# Verify .gitignore has: data/*.db and backend/*.db
```

#### 5. Duplicate Story 2.8 Issue
**Status:** Two stories with number 2.8

**Files:**
- `docs/stories/2.8-footer-component.md` (7.0KB) - Original story
- `docs/stories/2.8-pdf-worker-fix.md` (9.2KB) - Bug fix story (Done)

**Recommendation:** Renumber pdf-worker-fix to 2.11
```bash
git mv docs/stories/2.8-pdf-worker-fix.md docs/stories/2.11-pdf-worker-fix.md
# Update story ID inside file
```

---

### ðŸŸ¡ MEDIUM PRIORITY - Review & Organize

#### 6. `resources/` Directory (3.9MB, 323 files)
**Status:** Untracked

**Contents:**
- Multiple Cretamel report versions (Climate Survey, Culture Insights)
- HTML/CSS static sites
- PDFs
- Mixed Greek and English filenames
- Duplicate versions with numbering (1), _68738784, etc.

**Analysis:**
- **Purpose:** Appears to be audit evidence/reports for Cretamel company
- **Size:** 3.9MB (manageable but significant)
- **Structure:** Disorganized with duplicates

**Recommendation:** ORGANIZE, then ADD to .gitignore (keep locally, don't commit)

**Why exclude from Git:**
- Large binary files (PDFs)
- Audit-specific data (may be confidential)
- Not source code
- Can be backed up separately
- Changes frequently during audit prep

**Action:**
```bash
# Create organized structure
mkdir -p resources-organized/cretamel-reports/2025
mkdir -p resources-organized/smeta-evidence

# Move and consolidate files manually
# Then add to .gitignore:
echo "" >> .gitignore
echo "# Audit Resources (keep locally, not in git)" >> .gitignore
echo "resources/" >> .gitignore
echo "resources-organized/" >> .gitignore
```

**Alternative:** Keep one "canonical" version in git, mark as LFS (Large File Storage)

#### 7. `docs/frontend/` Directory (10 files)
**Status:** Tracked

**Contents:** Comprehensive frontend spec (01-introduction through 10-implementation-guide)

**Recommendation:** KEEP (valuable documentation)
- Well-structured UX/frontend specification
- Complements PRD and Architecture docs
- Useful for future development

**Action:** No action needed, already properly tracked

---

### ðŸŸ¢ LOW PRIORITY - Document & Keep

#### 8. `.bmad-core/` Directory
**Status:** Tracked

**Recommendation:** KEEP (core BMAD methodology files)
- Essential for agent-based development workflow
- Checklists, templates, workflows
- Should remain version controlled

#### 9. `docs/stories/` Directory
**Status:** Tracked (with some untracked)

**Recommendation:** KEEP all, track new ones
- Epic 1 stories (1.1 - 1.7): Core features âœ…
- Epic 2 stories (2.1 - 2.10): Enhanced features âœ…
- New stories should be tracked

**Action:** Add untracked stories to git
```bash
git add docs/stories/2.10-document-display-names.md
git add docs/stories/2.11-pdf-worker-fix.md  # after renumbering
git add docs/stories/2.9-frontend-spec-alignment.md
```

#### 10. Root Configuration Files
**Files:**
- `package.json` (monorepo workspace config) âœ… KEEP
- `package-lock.json` (dependency lock) âœ… KEEP
- `opencode.jsonc` (IDE config) âœ… KEEP
- `AGENTS.md` (BMAD agent directory) âœ… KEEP
- `README.md` (project documentation) âœ… KEEP
- `.gitignore` (git config) âœ… KEEP

**Recommendation:** All essential, keep tracked

---

## Updated `.gitignore` Recommendations

Add these sections to `.gitignore`:

```bash
# Audit Resources (confidential, large files)
resources/
resources-organized/

# Electron Development (if not pursuing desktop app)
.electron-temp/
electron/

# Database files (runtime data)
backend/*.db
backend/*.db-shm
backend/*.db-wal

# Backend uploads (user data, can be large)
backend/uploads/

# Build scripts (temporary development)
*.sh
!scripts/*.sh  # Keep scripts in scripts/ folder if we create one

# IDE and OS files
.DS_Store
.vscode/settings.json
.idea/

# Temporary files
*.tmp
*.temp
tmp/
temp/
```

---

## Documentation to Create

### 1. `CLEANUP-DECISIONS.md` (New file)
Document what was removed and why, for future reference.

### 2. Update `README.md`
Add sections:
- **Project Structure** - Explain each directory
- **What's Excluded from Git** - Explain .gitignore decisions
- **Audit Resources** - How to handle resources/ directory
- **Development vs Production** - Build/deployment differences

### 3. Create `docs/ARCHITECTURE-DECISIONS.md`
Document key decisions:
- Why no Electron (web-first per PRD)
- Why resources/ is not tracked (large files, confidential)
- Database handling approach

---

## Implementation Steps

### Phase 1: Safe Removals (No Risk)
1. Delete `.electron-temp/` directory
2. Delete root-level Electron shell scripts
3. Delete `ELECTRON_IMPLEMENTATION_GUIDE.md`
4. Add deletions to `.gitignore` to prevent re-adding

### Phase 2: Organization (Medium Risk)
1. Review `resources/` directory with user
2. Decide: Keep locally only, or organize and track selective files
3. Update `.gitignore` accordingly
4. Renumber story 2.8-pdf-worker-fix to 2.11

### Phase 3: Git Cleanup (Careful)
1. Ensure `backend/database.db` not tracked
2. Ensure `backend/uploads/` not tracked
3. Add new story files to git
4. Commit `.gitignore` updates

### Phase 4: Documentation (Important)
1. Create `CLEANUP-DECISIONS.md`
2. Update `README.md` with structure explanation
3. Update this story with completion notes

---

## Testing Checklist

After cleanup:
- [ ] `git status` shows clean working directory (or only intended changes)
- [ ] `npm run dev` still works (frontend + backend)
- [ ] `npm run build` (in frontend/) still works
- [ ] Application launches and functions correctly
- [ ] No unintended files deleted (verify with git log if needed)
- [ ] `.gitignore` properly excludes temporary files
- [ ] Documentation clearly explains project structure

---

## Estimated Development Time
**45-60 minutes**

Breakdown:
- Phase 1 (Safe Removals): 10 minutes
- Phase 2 (Organization): 15-20 minutes
- Phase 3 (Git Cleanup): 10 minutes
- Phase 4 (Documentation): 15-20 minutes
- Testing & Verification: 5 minutes

---

## Risk Assessment

**Low Risk:**
- Deleting `.electron-temp/` and Electron scripts (not used in main app)
- Updating `.gitignore` (doesn't affect existing tracked files)

**Medium Risk:**
- Organizing `resources/` (might need files during audit)
- Renumbering stories (breaks links if any)

**Mitigation:**
- Create git branch before cleanup: `git checkout -b cleanup/technical-debt`
- Keep backup of `resources/` directory before organizing
- Test application thoroughly after each phase

---

## Success Criteria

âœ… Project repository is clean and focused on SMETA platform code
âœ… No unnecessary files tracked in git
âœ… `.gitignore` properly configured for development workflow
âœ… Documentation clearly explains project structure
âœ… Application still works perfectly after cleanup
âœ… Git history is clean (or large files removed if needed)
âœ… Future developers can understand what each directory contains

---

## Dev Notes

### Current State Analysis

**Repository Size:**
- Total: ~10MB (estimated, excluding node_modules)
- `resources/`: 3.9MB (323 files) - Not tracked âœ…
- `backend/uploads/`: 6.0MB (audit documents) - Not tracked âœ…
- `.electron-temp/`: 88KB (development artifacts) - Not tracked âœ…

**Version Control Status:**
- 19 modified files (legitimate development)
- 13 untracked items (mix of intentional and cleanup candidates)

**Story Management:**
- 20 stories total (1.1 through 2.10 + pdf-worker-fix)
- Numbering conflict: Two 2.8 stories
- Some stories completed, some in progress

### Key Decisions Needed

**User Input Required:**
1. **Electron Desktop App:** Do you want to pursue this in future? If yes, organize; if no, delete.
2. **Resources Directory:** Are these files needed in git or just locally for audit?
3. **Story Numbering:** Should pdf-worker-fix be 2.11 or different number?

### Recommended Approach

**AGGRESSIVE CLEANUP (Recommended for audit focus):**
- Delete all Electron-related files (not in PRD)
- Exclude `resources/` from git (keep locally)
- Clean up duplicate stories
- Focus on core SMETA platform functionality

**CONSERVATIVE CLEANUP (If want to keep options):**
- Move Electron files to `_archive/electron/`
- Document but don't delete
- Keep resources/ but add to LFS

---

## Dev Agent Record

### Agent Model Used
_[To be filled by dev agent during implementation]_

### Completion Notes
_[To be filled by dev agent after implementation]_

### Files Deleted
_[List files removed during cleanup]_

### Files Moved
_[List files relocated during organization]_

### Files Modified
- `.gitignore` - Updated with new exclusions
- `README.md` - Added project structure documentation
- `docs/stories/2.8-pdf-worker-fix.md` â†’ `docs/stories/2.11-pdf-worker-fix.md`

### New Files Created
- `CLEANUP-DECISIONS.md` - Documents cleanup rationale
- (Optional) `docs/ARCHITECTURE-DECISIONS.md` - Key technical decisions

---

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| Oct 28, 2025 | 1.0 | Story created from project review | Sarah (PO) |
