# Story 2.6: Production Build & Deployment Setup

## Status
**ready for development**

## Story
**As a** developer,  
**I want** a production build process and startup script for Linux/Unix environments,  
**so that** the application can be easily deployed and run in production.

## Acceptance Criteria
1. Frontend build script (`npm run build` in frontend/) creates optimized production bundle in `frontend/dist/` folder
2. Backend serves frontend static files from `dist/` folder when `NODE_ENV=production`
3. Backend updated: Single port (5001) serves both API routes (`/api/*`) and frontend static files (all other routes with SPA fallback)
4. `start-platform.sh` script created in project root that:
   - Checks Node.js is installed
   - Sets NODE_ENV=production
   - Starts backend server
   - Displays URL and instructions
5. Production build removes console.logs and uses minified assets
6. Backend serves `index.html` for all non-API routes (SPA routing support)
7. `build.sh` script created for one-command build of both frontend and backend
8. `README.md` updated with production deployment instructions including build and start commands
9. Test: After running startup script, application fully functional (upload, view, search, CAPA all working)
10. CORS disabled in production (not needed when serving from same origin)

## Tasks / Subtasks
- [ ] Configure frontend production build with optimizations
- [ ] Update backend to serve static files in production mode
- [ ] Add SPA fallback route to backend (serve index.html for non-API routes)
- [ ] Create build.sh script for complete build process
- [ ] Create start-platform.sh script for production startup
- [ ] Update README with deployment instructions
- [ ] Test production build end-to-end
- [ ] Disable CORS in production mode

## Dev Notes

### Environment Detection
Backend should detect production mode via `NODE_ENV=production` and:
- Serve static files from `../frontend/dist`
- Disable CORS (same origin)
- Use production database path

### SPA Routing Support
All non-API routes should return `index.html` to support React Router client-side routing.

### Scripts Location
Both `build.sh` and `start-platform.sh` should be in project root with executable permissions (`chmod +x`)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| Oct 28, 2025 | 1.0 | Story created from PRD | Sarah (PO) |
| Oct 28, 2025 | 2.0 | Updated for Linux/Unix environment instead of Windows | User & James (Dev) |
